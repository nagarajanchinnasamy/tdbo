<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
      "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>tdbo::MariaDB</title>
  <meta name="generator" content="Amaya, see http://www.w3.org/Amaya/">
  <style type="text/css" title="Amaya theme">
/* Modern style for Amaya Editor Lite */

/* default rules for the whole document */
body {
    font-size: 12pt;
    font-family: Helvetica, Arial, sans-serif;
    font-weight: normal;
    font-style: normal;
    color: black;
    background-color: white;
    line-height: 1.2em;
    margin-left: 4em;
    margin-right: 2em;
   }

/* paragraphs */
p  {
    padding: 0;
    margin-top: 1em;
    margin-bottom: 1em;
    text-align: left;
   }

/* headings */
h1 {
    font-size: 180%;
    font-weight: bold;
    font-style: normal;
    font-variant: small-caps;
    text-align: left;
    padding: 0;
    margin-top: 1.7em;
    margin-bottom: 1.7em;
   }
h2 {
    font-size: 150%;
    font-weight: bold;
    font-style: normal;
    padding: 0;
    margin-top: 1.5em;
    margin-bottom: 1.1em;
   }
h3 {
    font-size: 130%;
    font-weight: bold;
    font-style: normal;
    padding: 0;
    margin-top: 1.3em;
    margin-bottom: 1.1em;
   }
h4 {
    font-size: 110%;
    font-weight: bold;
    font-style: normal;
    padding: 0;
    margin-top: 1.1em;
    margin-bottom: 1.1em;
   }
h5 {
    font-size: 100%;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin-top: 1em;
    margin-bottom: 1em;
   }
h6 {
    font-size: 100%;
    font-weight: normal;
    font-style: italic;
    padding: 0;
    margin-top: 1em;
    margin-bottom: 1em;
   }

/* divisions */
div {
    padding: 0;
    margin-top: 0em;
    margin-bottom: 0em;
   }

/* lists */
ul, ol {
    padding: 0 0 0 3em;
    margin-top: 1em;
    margin-bottom: 1em;
   }
ul ul, ol ol, ul ol, ol ul {
    margin-top: 1em;
    margin-bottom: 1em;
   }
li {
    padding: 0;
    margin-top: 1em;
    margin-bottom: 1em;
    text-align: left;
   }
li p {
    margin-top: 1em;
    margin-bottom: 1em;
   }
dl {
    padding: 0;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 1em;
   }
dl dl {
    margin-top: 0em;
    margin-bottom: 0em;
   }
dt {
    padding: 0;
    font-weight: bold;
    margin-top: .3em;
    margin-bottom: .3em;
   }
dd {
    padding: 0;
    margin-top: .3em;
    margin-left: 3em;
    margin-bottom: .3em;
   }
dl p {
    margin-top: .3em;
    margin-bottom: .3em;
   }

/* inline */
strong {
    font-weight: bold;
   }
em {
    font-style: italic;
   }
code {
    font-family: Courier New, Courier, monospace;
   }
ins {
    background-color: yellow;
    text-decoration: underline;
   }
del {
    text-decoration: line-through;
   }

/* anchors */
a[href] {
    color: blue;
    text-decoration: underline;
   }

hr {
  border: 0;
  width: 100%;
  color: #f00;
  background-color: #f00;
  height: 1px;
}

th {
  background-color: #CCCCFF;
  text-align: left;
}

td {
  vertical-align: top;
}

/* end */
  </style>
</head>

<body>
<h1><a href="index.html">TDBO</a> - Tcl DataBase Object</h1>
<br>
<br>


<table border="0" style="width: 100%">
  <col>
  <tbody>
    <tr>
      <td align="center" colspan="1"><a href="reference.html">Table Of
        Contents</a></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<a id="Sections"></a> 

<h3>Sections</h3>
<dl>
    <dd><a href="#ClassSummary">Class Summary</a></dd>
    <dd><a href="#Inheritance">Inheritance</a></dd>
    <dd><a href="#ConstructorSummary">Constructor Summary</a></dd>
    <dd><a href="#ProcMethodsSummary">Proc/Methods Summary</a></dd>
    <dd><a href="#ConstructorDetail">Constructor Detail</a></dd>
    <dd><a href="#ProcMethodDetail">Proc/Method Detail</a></dd>
</dl>
<br>
<br>


<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th><strong><a id="ClassSummary"></a>Class: tdbo::MariaDB</strong></th>
    </tr>
    <tr>
      <td><p>MariaDB / MySQL Database Connectivity Implementation. Instantiate
        this class and invoke <code><a href="#open">open</a></code> method to
        establish a connection to PostgreSQL database. This class provides
        <code><a href="#insert">insert</a></code>, <code><a
        href="#get">get</a></code>, <code><a href="#update">update</a></code>
        and <code><a href="#delete">delete</a></code> methods to manipulate
        records in a table. In addition, it supports <code><a
        href="#mget">mget</a></code>, <code><a
        href="#rollback">rollback</a></code> and <code><a
        href="#commit">commit</a></code> methods for retrieving multiple
        records and executing transactions. A connection can be closed using
        <code><a href="#close">close</a></code> method.</p>

        <p><strong>NOTE</strong>: CRUD operations to manipulate records of a
        table / view are abstracted through <a
        href="dbobject.html">DBObject</a> class. Hence, one will need to use
        the instance of this class directly only when you use one of <code><a
        href="#open">open</a></code>, <code><a href="#mget">mget</a></code>,
        <code><a href="#begin">begin</a></code>, <code><a
        href="#rollback">rollback</a></code>, <code><a
        href="#commit">commit</a></code> and <code><a
        href="#close">close</a></code> methods.</p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>


<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th><strong><a id="Inheritance"></a>Inherits: <a
        href="database.html">tdbo::Database</a></strong></th>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td>Methods: <a href="database.html#open">open</a>, <a
        href="database.html#close">close</a>, <a
        href="database.html#get">get</a>, <a href="database.html#get">mget</a>,
        <a href="database.html#get">insert</a>, <a
        href="database.html#get">update</a>, <a
        href="database.html#get">delete</a>, <a
        href="database.html#get">begin</a>, <a
        href="database.html#get">commit</a>, <a
        href="database.html#get">rollback</a> 

        <p>Variables: <a href="object.html#clsName">clsName</a>, <a
        href="object.html#log">log</a></p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>


<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th colspan="2"><strong><a id="ConstructorSummary"></a>Constructor
        Summary</strong></th>
    </tr>
    <tr>
      <td><a href="#constructor">constructor {}</a></td>
      <td>Constructor. Loads mysqltcl package.</td>
    </tr>
  </tbody>
</table>
<br>
<br>


<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th colspan="2"><strong><a id="ProcMethodsSummary"></a>Procs/Methods
        Summary</strong></th>
    </tr>
    <tr>
      <td nowrap="nowrap" align="right"><code>public method</code> </td>
      <td><code><a href="#begin">begin {{isolation "repeatable
        read"}}</a></code> 

        <p>Begin a database transaction.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#close">close {}</a></code> 

        <p>Close the database connection.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#commit">commit {}</a></code> 

        <p>Commit the currently active database transaction.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#delete">delete {schema_name {conditionlist ""}}
        </a></code> 

        <p>Delete one or more records from the table/view indicated by
        <code>schema_name</code> that meet the <code>condition</code>.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#get">get {schema_name fieldslist conditionlist
        {format "dict"}}</a></code> 

        <p>Retrieve a record, that meets the <code>condition</code>, from a
        table/view indicated by <code>schema_name</code>.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#insert">insert {schema_name namevaluepairs
        {sequence_fields ""}}</a></code> 

        <p>Insert a new record into the table / view indicated by
        <code>schema_name</code>.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#mget">mget {schema_name args} </a></code> 

        <p>Retrieve multiple records from a table / view indicated by
        <code>schema_name</code>.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#open">open {dbname args}</a></code> 

        <p>Establish a connection to database.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#rollback">rollback {} </a></code> 

        <p>Rollback currently active database transaction.</p>
      </td>
    </tr>
    <tr>
      <td align="right"><code>public method</code> </td>
      <td><code><a href="#update">update {schema_name namevaluepairs
        {conditionlist ""}} </a></code> 

        <p>Update one or more records, that meet the <code>condition</code>, of
        the table / view indicated by <code>schema_name</code>.</p>
      </td>
    </tr>
  </tbody>
</table>

<p></p>

<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th><strong><a id="ConstructorDetail"></a>Constructor Detail</strong></th>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="constructor"></a>constructor
          {}</strong></code> </dt>
            <dd>Constructor. Loads <a
              href="http://www.xdobry.de/mysqltcl/">mysqltcl</a> package. </dd>
        </dl>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>


<table border="1" style="width: 100%">
  <tbody>
    <tr>
      <th><strong><a id="ProcMethodDetail"></a>Proc/Method Detail</strong></th>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="open">public method open {dbname
          args}</a></strong></code> </dt>
            <dd>After creating an instance of this class, invoke this method on
              the instance to establishe a connection to the database.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>dbname</dt>
                        <dd>Name of the database to connect.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>args</dt>
                        <dd>Connection parameters as a list containing
                          switch-value pairs (E.g., <code>-host hostName -user
                          user)</code>. Please refer to mysqltcl package
                          documentation for supported options. </dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>The connection handle as returned by mysqltcl package. As
                    this is internally stored and used for further method
                    invocations, tdbo does not expect applications to store and
                    use this handle directly.</dd>
              </dl>
              <dl>
                <dt>Throws:</dt>
                  <dd>An error if establishing connection to database fails or
                    an opened connection already exists.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="close"></a>public method close
          {}</strong></code></dt>
            <dd>Closes the connection with database.</dd>
        </dl>
        <dl>
            <dd><dl>
                <dt>Throws:</dt>
                  <dd>An error if closing the connection to database fails.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="get"></a>public method get {schema_name
          fieldslist conditionlist {format "dict"}}</strong></code></dt>
            <dd>Retrieves a record, that is uniquely identified by the
              <code>conditionlist</code>, from a table / view indicated by
              <code>schema_name</code>.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>schema_name</dt>
                        <dd>Name of the table / view.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>fieldslist</dt>
                        <dd>List of field names of the record that needs to be
                          retrieved.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>conditionlist</dt>
                        <dd>When supplied with a list of dictionaries where
                          each dictionary containing fieldname-value pairs (For
                          e.g., <code>{{f1 val1 f2 val2} {f1 val3 f3
                          val4}}</code>) it places an = between fieldname and
                          value and quotes the value (e.g., f1='val1'), then
                          joins the pairs with AND (e.g., f1='val1' AND
                          f2='val2') and then joins the dictionaries with an OR
                          (e.g., ((f1='val1' AND f2='val2') OR (f1='val3' AND
                          f3='val4'))). A value of IS NULL is treated specially
                          by only separating the fieldname and value by space
                          (e.g., f1 IS NULL). This translated condition is used
                          in WHERE clause of the SQL statement to retrieve a
                          unique record.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>format</dt>
                        <dd>Specifies the format in which the result is to be
                          returned. The value for this option can be either
                          dict or list. Default value is dict. </dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>Returns fieldname-value pairs or a list of values when
                    the format is dict or list respectively. If the execution
                    of SELECT statement does not return any record from
                    database, then an empty string is returned.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="mget"></a>public method mget {schema_name
          args}</strong></code> </dt>
            <dd>Retrieves multiple records from a table / view indicated by
              <code>schema_name</code>.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>schema_name</dt>
                        <dd>Name of the table / view.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>args</dt>
                        <dd>Optional dictionary of option-value pairs.
                          Supported options are: -condition, -groupby,
                          -orderby, -fields and -format. -condition option
                          expects a string containing valid SQL WHERE clause
                          term as its value, -groupby expects a string
                          containing valid SQL GROUP BY term as its value,
                          -orderby option expects a string containing valid SQL
                          ORDER BY term as its value, -fields option expects a
                          list of field/column names as its value and -format
                          option expects one of list, llist and dict as its
                          value. Value of list for -format option returns the
                          whole result set as a single list, llist returns the
                          result set as a list containing lists where each list
                          corresponds to a record and dict returns the result
                          set as a list containing dictionaries where each
                          dictionary corresponds to a record and a name-value
                          pair in a dictionary correspond to column-name and
                          its value.</dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>Result set in the format indicated by -format option. An
                    empty string is returned if the result set does not contain
                    any record.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="insert"></a>public method insert
          {schema_name namevaluepairs {sequence_fields ""}}</strong></code>
          </dt>
            <dd>Inserts a new record into the table / view indicated by
              <code>schema_name</code>. </dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>schema_name</dt>
                        <dd>Name of the table / view. </dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>namevaluepairs</dt>
                        <dd>A dictionary of fieldname-value pairs (For e.g.,
                          <code>{f1 val1 f2 val2}</code>) representing the
                          fields and their respective values to be inserted
                          into the table.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>sequence_fields</dt>
                        <dd>Optional list of field names that are sequence /
                          auto-increment fields. Upon successful insertion of
                          the record, these fields are populated with the value
                          returned by insertid command of the mysqltcl
                        package</dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>The status of insert operation. A value greater than zero
                    indicates success. When <code>sequence_fields</code> is
                    non-empty, the return value is a list containing two
                    elements: First element is the status of insert operation
                    and the second is a dictionary of sequence_fieldname-value
                    pairs.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="update"></a>public method update
          {schema_name namevaluepairs {conditionlist ""}}</strong></code> </dt>
            <dd>Updates one or more existing records, that meet the
              <code>condition</code>, of the table / view indicated by
              <code>schema_name</code>.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>schema_name</dt>
                        <dd>Name of the table / view.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>namevaluepairs</dt>
                        <dd>A dictionary of fieldname-value pairs (For e.g.,
                          <code>{f1 val1 f2 val2}</code>) representing the
                          fields and their respective values to be updated in
                          the table.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>conditionlist</dt>
                        <dd>When supplied with a list of dictionaries where
                          each dictionary containing fieldname-value pairs (For
                          e.g., <code>{{f1 val1 f2 val2} {f1 val3 f3
                          val4}}</code>) it places an = between fieldname and
                          value and quotes the value (e.g., f1='val1'), then
                          joins the pairs with AND (e.g., f1='val1' AND
                          f2='val2') and then joins the dictionaries with an OR
                          (e.g., ((f1='val1' AND f2='val2') OR (f1='val3' AND
                          f3='val4'))). A value of IS NULL is treated specially
                          by only separating the fieldname and value by space
                          (e.g., f1 IS NULL). This translated condition is used
                          in WHERE clause of the SQL statement to identify the
                          records to be updated. </dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>Number of records that are updated.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="delete"></a>public method delete
          {schema_name {conditionlist ""}}</strong></code> </dt>
            <dd>Deletes one or more existing records, that meet the
              <code>condition</code>, from the table / view indicated by
              <code>schema_name</code>.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>schema_name</dt>
                        <dd>Name of the table / view.</dd>
                    </dl>
                  </dd>
                  <dd><dl>
                      <dt>conditionlist</dt>
                        <dd>When supplied with a list of dictionaries where
                          each dictionary containing fieldname-value pairs (For
                          e.g., <code>{{f1 val1 f2 val2} {f1 val3 f3
                          val4}}</code>) it places an = between fieldname and
                          value and quotes the value (e.g., f1='val1'), then
                          joins the pairs with AND (e.g., f1='val1' AND
                          f2='val2') and then joins the dictionaries with an OR
                          (e.g., ((f1='val1' AND f2='val2') OR (f1='val3' AND
                          f3='val4'))). A value of IS NULL is treated specially
                          by only separating the fieldname and value by space
                          (e.g., f1 IS NULL). This translated condition is used
                          in WHERE clause of the SQL statement to identify the
                          records to be deleted. </dd>
                    </dl>
                  </dd>
                <dt>Returns:</dt>
                  <dd>Number of records that are deleted.</dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="begin"></a>public method begin {{isolation
          "repeatable read"}}</strong></code> </dt>
            <dd>Sets the transaction isolation level and starts a database
              transaction.</dd>
            <dd><dl>
                <dt>Parameters:</dt>
                  <dd><dl>
                      <dt>isolation</dt>
                        <dd>Transaction isolation level. Please refer to
                          MariaDB / MySQL documentation for supported values.
                          The default value is: repeatable read.</dd>
                    </dl>
                  </dd>
              </dl>
            </dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="commit"></a>public method commit
          {}</strong></code> </dt>
            <dd>Commits the currently active database transaction.</dd>
        </dl>
      </td>
    </tr>
    <tr>
      <td><dl>
          <dt><code><strong><a id="rollback"></a>public method rollback
          {args}</strong></code> </dt>
            <dd>Rolls back the currently active database transaction. </dd>
        </dl>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>


<table border="0" style="width: 100%">
  <tbody>
    <tr>
      <td align="center"><a href="#Sections">Sections</a></td>
      <td align="center"><a href="reference.html">Table Of Contents</a></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<br>

<hr>

<p>Copyright (c) 2013 by Nagarajan Chinnasamy
&lt;nagarajanchinnasamy@gmail.com&gt;. See <a href="license.html">License</a>
for information on usage and redistribution</p>
</body>
</html>
